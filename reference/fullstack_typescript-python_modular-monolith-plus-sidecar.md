# fullstack_typescript-python_modular-monolith-plus-sidecar

## 适用场景

- 主体为 TypeScript/Next.js 模块化单体，辅以 Python 侧车微服务

## 重构思路

1. 主干优先：先稳定 Next.js 主体模块边界，再收敛 Python 侧车调用边界。
2. 契约先行：定义 TS <-> Python 接口协议（请求/响应/错误）并固化测试。
3. 分阶段拆分：按业务域逐块重构，避免一次性大迁移。

## 合规思路

1. 跨服务调用合规：超时、重试、熔断、降级策略可审计。
2. 数据流合规：明确跨边界数据类型与敏感字段处理规则。
3. 变更可回滚：每次重构保持回滚点，防止跨栈故障放大。

## 最佳实践

1. 单体内模块化：领域边界、依赖方向、公共契约统一管理。
2. 侧车服务最小化：只保留确有必要的 Python 能力（如 PDF 转换）。
3. 端到端测试：覆盖前端 -> API -> Python 服务的关键链路。
4. 可观测性：统一 trace/log 关联 ID，便于跨栈排障。
